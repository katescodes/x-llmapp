# 自定义规则管理功能 - 演示指南

## 功能演示准备

### 1. 环境准备
```bash
# 确保后端服务运行
cd /aidata/x-llmapp1/backend
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# 确保前端服务运行
cd /aidata/x-llmapp1/frontend
npm start
```

### 2. 前置条件
- ✅ 已创建测试项目
- ✅ 已配置LLM模型
- ✅ 用户具有 tender:read 和 tender:write 权限

---

## 演示流程

### 场景：为某政府采购项目创建特殊资格审查规则

### 第一步：进入规则管理页面

1. 打开招投标工作台
2. 选择一个测试项目
3. 点击左侧的 **"自定义规则"** 按钮（粉色渐变，在"格式模板"下方）

![按钮位置](演示说明：左侧边栏有两个按钮，上面是紫色的"格式模板"，下面是粉色的"自定义规则")

### 第二步：创建规则包

1. 点击右上角的 **"+ 创建规则包"** 按钮
2. 在弹出的表单中输入：

**规则包名称：**
```
政府采购特殊资格要求
```

**规则要求：**
```
1. 投标人必须具有有效的营业执照，且注册资本不低于500万元
2. 投标人必须提供近三年（2021-2023年）的财务审计报告
3. 投标人必须具有信息系统集成及服务资质证书（三级及以上）
4. 投标报价不得高于采购预算的110%
5. 投标文件必须按照招标文件规定的格式装订，页码必须连续
6. 投标人必须提供项目负责人的PMP或类似项目管理资格证书
7. 投标人近三年内无重大违法违规记录
8. 投标保证金必须在投标截止时间前到账，金额不低于投标报价的2%
```

3. 点击 **"创建规则包"** 按钮
4. 等待AI分析（约5-10秒）
5. 创建成功后，左侧列表会显示新规则包

### 第三步：查看生成的规则

1. 在左侧列表中点击刚创建的规则包
2. 右侧会显示AI生成的规则详情

**预期看到的规则（示例）：**

**规则1：营业执照检查**
- 维度：资格审查
- 执行器：LLM语义
- 严重程度：高
- 硬性要求：是
- 条件：检查营业执照有效性

**规则2：注册资本检查**
- 维度：资格审查
- 执行器：确定性
- 严重程度：高
- 硬性要求：是
- 条件：注册资本 >= 5,000,000元

**规则3：财务审计报告检查**
- 维度：资格审查
- 执行器：LLM语义
- 严重程度：高
- 硬性要求：是
- 条件：提供2021-2023年财务审计报告

...（其他规则）

### 第四步：创建第二个规则包（技术要求）

1. 再次点击 **"+ 创建规则包"**
2. 输入：

**规则包名称：**
```
系统技术规格要求
```

**规则要求：**
```
1. 系统必须支持1000个并发用户
2. 系统响应时间不超过3秒
3. 数据库必须支持主从复制
4. 系统必须提供RESTful API接口
5. 必须支持MySQL 8.0或以上版本
```

3. 创建成功后，左侧列表会显示两个规则包

### 第五步：在审核中应用规则

1. 点击左上角的 **"返回"** 按钮，回到项目主页面
2. 点击 **"⑤ 审核"** Tab
3. 在审核页面找到 **"可选：选择自定义规则包"** 部分
4. 勾选：
   - ☑️ 政府采购特殊资格要求 (8 条规则)
   - ☑️ 系统技术规格要求 (5 条规则)
5. 选择投标人（如果有）
6. 点击 **"开始审核"** 按钮
7. 观察审核结果

### 第六步：管理规则包

**查看规则详情：**
- 返回自定义规则页面
- 点击任一规则包
- 查看所有规则的详细配置

**删除规则包：**
- 点击规则包旁边的 **"删除"** 按钮
- 确认删除
- 规则包和所有规则会被永久删除

---

## 演示要点

### 1. AI自动分析的优势
强调以下几点：
- ✨ **自然语言输入**：无需了解复杂的规则配置语法
- ✨ **自动分类**：AI会自动识别规则的维度（资格/技术/商务等）
- ✨ **智能判断**：区分确定性规则（数值比较）和语义规则（需要理解）
- ✨ **硬性标记**：自动识别哪些是废标项（硬性要求）

### 2. 规则包的灵活性
- 📦 **场景化组织**：不同场景创建不同规则包
- 📦 **自由组合**：审核时可选择应用一个或多个规则包
- 📦 **项目隔离**：每个项目的规则包独立管理

### 3. 审核集成
- 🔍 选择规则包后，系统会将规则应用到审核流程
- 🔍 与规则文件资产并行使用，提供更全面的审核能力
- 🔍 支持多投标人审核

---

## 演示脚本（5分钟版）

### 开场（30秒）
"大家好，今天演示招投标系统的自定义规则管理功能。这个功能让用户可以用自然语言输入规则要求，系统自动生成结构化规则，用于投标文件审核。"

### 创建规则包（2分钟）
1. "首先点击左侧的自定义规则按钮"
2. "点击创建规则包"
3. "输入规则包名称和规则要求，这里我输入了8条政府采购的特殊资格要求"
4. "点击创建，系统会使用AI自动分析"
5. "可以看到，AI成功生成了8条结构化规则"

### 查看规则详情（1分钟）
1. "点击规则包，可以看到所有规则的详情"
2. "每条规则包括维度、严重程度、执行器类型等信息"
3. "AI自动识别了哪些是硬性要求，哪些需要语义理解"

### 应用规则（1.5分钟）
1. "回到项目主页面，切换到审核Tab"
2. "可以看到刚才创建的规则包出现在选择列表中"
3. "勾选规则包，选择投标人，开始审核"
4. "系统会应用选中的规则进行审核"

### 总结（30秒）
"通过这个功能，用户无需学习复杂的规则配置，只需用自然语言描述要求，就能创建专业的审核规则。规则包可以灵活组合，满足不同项目的需求。"

---

## 常见演示问题及解答

### Q1: AI分析需要多长时间？
**A**: 通常5-10秒，取决于规则数量和LLM响应速度。

### Q2: 如果AI分析失败会怎样？
**A**: 规则包会创建成功，但不包含规则。可以删除后重试，或联系管理员检查LLM配置。

### Q3: 规则包可以跨项目使用吗？
**A**: 当前版本不支持，规则包是项目级的。未来可能会支持规则模板库。

### Q4: 生成的规则可以修改吗？
**A**: 当前版本不支持编辑。如需修改，删除后重新创建，并优化规则描述。

### Q5: 规则包选择后会立即生效吗？
**A**: 选择规则包后，需要点击"开始审核"才会应用规则。

### Q6: 可以同时使用规则包和规则文件吗？
**A**: 可以，两者可以并行使用，提供更全面的审核能力。

---

## 演示准备清单

### 技术准备
- [ ] 后端服务正常运行
- [ ] 前端服务正常运行
- [ ] LLM模型配置正确
- [ ] 测试项目已创建
- [ ] 用户权限配置正确

### 演示数据准备
- [ ] 准备好规则要求文本（复制到剪贴板）
- [ ] 准备好规则包名称
- [ ] （可选）准备投标文件用于审核演示

### 演示环境检查
- [ ] 屏幕共享设置正常
- [ ] 浏览器缩放比例适中
- [ ] 清除浏览器缓存
- [ ] 关闭不必要的浏览器标签
- [ ] 准备好演示PPT或文档

---

## 演示后的讨论点

1. **规则质量**：AI生成的规则准确性如何？
2. **用户体验**：用户是否能轻松理解和使用？
3. **性能**：规则分析速度是否满足需求？
4. **扩展性**：未来可以添加哪些功能？
5. **集成**：规则引擎如何与审核流程深度集成？

---

## 备选演示场景

### 场景2：建筑工程项目
```
规则包名称：建筑施工资质要求

规则要求：
1. 施工单位必须具有建筑工程施工总承包一级及以上资质
2. 项目经理必须具有一级建造师证书
3. 安全员必须持有安全生产考核合格证
4. 投标报价不得低于成本价的85%
5. 必须提供类似项目业绩证明（近5年内完成3个以上类似项目）
```

### 场景3：软件开发项目
```
规则包名称：软件开发能力要求

规则要求：
1. 开发团队规模不少于10人
2. 必须具有CMMI 3级及以上认证
3. 必须采用敏捷开发方法论
4. 代码质量必须通过SonarQube扫描，严重bug数为0
5. 必须提供完整的测试报告和用户手册
```

