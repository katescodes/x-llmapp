# 录音导入导出功能 - 快速使用指南

## 📥 导入外部音频文件

### 前端操作步骤：

1. **打开录音页面**
   - 在导航栏点击"📼 我的录音"

2. **点击导入按钮**
   - 在页面右上角找到 **📁 导入音频** 按钮并点击

3. **上传音频文件**
   - 方式1：点击上传区域，选择本地音频文件
   - 方式2：直接拖拽音频文件到上传区域
   - 支持格式：MP3, WAV, M4A, OGG, WebM, FLAC, AAC
   - 文件大小限制：100MB

4. **等待上传完成**
   - 上传成功后会显示提示信息
   - 音频会出现在录音列表中

5. **转写音频**
   - 找到刚上传的录音，点击 **📝 转写** 按钮
   - 可选择是否启用LLM文本增强
   - 等待转写完成（可能需要几分钟）

6. **使用录音**
   - 播放：点击 **▶️ 播放** 按钮在线播放
   - 查看全文：点击 **📄 全文** 查看转写文本
   - 生成摘要：点击 **📝 摘要** 生成AI摘要
   - 导入知识库：点击 **📥 导入知识库** 保存到知识库
   - 导出：点击 **💾 导出** 下载音频文件

## 💾 导出系统录音

### 前端操作步骤：

1. **找到要导出的录音**
   - 在"我的录音"列表中浏览录音

2. **点击导出按钮**
   - 在录音卡片上找到 **💾 导出** 按钮并点击

3. **保存文件**
   - 浏览器会自动下载音频文件
   - 文件名使用录音标题

4. **验证文件**
   - 使用音频播放器打开下载的文件
   - 确认音频内容正确

## 🔧 API 使用（开发者）

### 上传音频文件

```bash
curl -X POST "http://localhost:8000/api/recordings/upload" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@/path/to/audio.mp3" \
  -F "title=我的录音"
```

### 下载音频文件

```bash
curl -X GET "http://localhost:8000/api/recordings/{recording_id}/download" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -o recording.mp3
```

### 转写音频

```bash
curl -X POST "http://localhost:8000/api/recordings/{recording_id}/transcribe" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "enhance": true,
    "enhancement_type": "punctuation"
  }'
```

## 🧪 运行测试

运行自动化测试脚本：

```bash
# 获取认证令牌后运行
./test_recording_import_export.sh http://localhost:8000 YOUR_AUTH_TOKEN
```

## ⚠️ 注意事项

1. **音频格式**
   - 推荐使用 MP3 或 M4A 格式以获得最佳兼容性
   - WebM 格式在某些播放器中可能不支持

2. **文件大小**
   - 上传文件最大 100MB
   - 大文件上传和转写可能需要较长时间

3. **转写服务**
   - 需要配置 ASR（语音识别）服务
   - 上传后需要手动点击"转写"按钮
   - 转写完成前无法查看文本内容

4. **存储空间**
   - 音频文件会占用服务器存储空间
   - 建议定期清理不需要的录音

5. **网络连接**
   - 上传大文件时确保网络连接稳定
   - 如果上传失败，请重试

## 💡 使用技巧

1. **批量处理**
   - 可以上传多个音频文件
   - 逐个点击转写进行处理

2. **文件管理**
   - 为导入的音频设置有意义的标题
   - 使用标签分类管理录音

3. **文本增强**
   - 对于口语录音，建议启用"标点和段落"增强
   - 对于会议录音，建议使用"会议纪要"格式
   - 对于正式演讲，可选择"正式书面语"

4. **知识库整合**
   - 转写完成后及时导入知识库
   - 可以在导入时添加分类和标签
   - 便于后续检索和使用

## 🐛 常见问题

**Q: 上传文件失败怎么办？**
A: 检查文件格式和大小是否符合要求，确认网络连接正常。

**Q: 转写失败怎么办？**
A: 确认 ASR 服务已配置并正常运行，检查服务器日志获取详细错误信息。

**Q: 下载的文件无法播放？**
A: 尝试使用不同的播放器，或将 WebM 格式转换为 MP3 格式。

**Q: 可以同时上传多个文件吗？**
A: 当前版本需要逐个上传，可以多次点击导入按钮上传多个文件。

**Q: 导入的音频会自动转写吗？**
A: 不会，需要手动点击"转写"按钮开始转写。

## 📚 相关文档

- [完整技术文档](./RECORDING_IMPORT_EXPORT_FEATURE.md)
- [录音功能说明](../README.md)
- [API 文档](http://localhost:8000/docs)

